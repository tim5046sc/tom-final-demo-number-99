import API from '@sitecore-feaas/api'
import options from './_options';

export default async function Script() {
  const api = new API(options)
  function ID(id: string) {
    return id + options.suffix
  }


  const library = await api.libraries.get({ id: ID(options.libraryId) })
  const collections = await library.collections.fetch()
  const collection = collections.find((c) => c.name == 'General');
  const component = collection?.components.find((c) => c.name == 'Brand carousel');
  await component?.variants.fetch();
  const variant = component?.establishVariant({
    refId: ID('brand-carousel'),
    status: 'saved',
    name: "Dynamic carousel",
    view: `<style>/* Type: dimensions Id: rqSzgCwq6G-dimensions Title: dimensions Instance Id: rqSzgCwq6G */ .-dimensions--dimensions[class][class][class][data-instance-id="rqSzgCwq6G"] { min-width: 1440px; max-width: 1440px; } /* Data: {"type":"dimensions","props":{"minHeight":null,"maxHeight":null,"minWidth":{"value":1440,"unit":"px"},"maxWidth":{"value":1440,"unit":"px"}},"details":{"title":"dimensions","id":"rqSzgCwq6G-dimensions","instanceId":"rqSzgCwq6G"}} */ /* --- */ /* Type: layout Id: default-layout Title: default-layout Instance Id: rqSzgCwq6G */ .-layout--default-layout[class][class][class][data-instance-id="rqSzgCwq6G"] { display: flex; flex-wrap: nowrap; flex-direction: column; justify-content: center; align-items: flex-start; } .-layout--default-layout[class][class][class][data-instance-id="rqSzgCwq6G"] > * { margin-top: var(---typography--paragraph-spacing, var(---self--row-gap, 0px)); } .-layout--default-layout[class][class][class][data-instance-id="rqSzgCwq6G"] > :nth-child(-n+1) { ---self--row-gap: initial; } .-layout--default-layout[class][class][class][data-instance-id="rqSzgCwq6G"] > :not(:nth-child(-n+1)) { ---self--row-gap: var(---spacing--row-gap, 0px); } .-layout--default-layout[class][class][class][data-instance-id="rqSzgCwq6G"] > :nth-child(1n + 1)) { ---self--column-gap: initial; } .-layout--default-layout[class][class][class][data-instance-id="rqSzgCwq6G"] > :not(:nth-child(1n + 1)) { ---self--column-gap: var(---spacing--column-gap, 0px); } .-layout--default-layout[class][class][class][data-instance-id="rqSzgCwq6G"] > :nth-child(1n + 1) { ---self--column-width: calc(var(---layout--available-width, 100%) / 1 * 1); } /* Data: {"type":"layout","details":{"title":"default-layout","description":"","exampleContent":null,"id":"default-layout","isInternal":true,"isDefault":true,"isHidden":true,"instanceId":"rqSzgCwq6G"},"props":{"flexWrap":false,"columnCount":1,"weights":[1],"justifyContent":"center","alignItems":"flex-start"}} */ /* --- */ /* Type: layout Id: default-layout Title: default-layout Instance Id: GstumkRnbD */ .-layout--default-layout[class][class][class][data-instance-id="GstumkRnbD"] { display: flex; flex-wrap: nowrap; flex-direction: column; justify-content: center; align-items: center; } .-layout--default-layout[class][class][class][data-instance-id="GstumkRnbD"] > * { margin-top: var(---typography--paragraph-spacing, var(---self--row-gap, 0px)); } .-layout--default-layout[class][class][class][data-instance-id="GstumkRnbD"] > :nth-child(-n+1) { ---self--row-gap: initial; } .-layout--default-layout[class][class][class][data-instance-id="GstumkRnbD"] > :not(:nth-child(-n+1)) { ---self--row-gap: var(---spacing--row-gap, 0px); } .-layout--default-layout[class][class][class][data-instance-id="GstumkRnbD"] > :nth-child(1n + 1)) { ---self--column-gap: initial; } .-layout--default-layout[class][class][class][data-instance-id="GstumkRnbD"] > :not(:nth-child(1n + 1)) { ---self--column-gap: var(---spacing--column-gap, 0px); } .-layout--default-layout[class][class][class][data-instance-id="GstumkRnbD"] > :nth-child(1n + 1) { ---self--column-width: calc(var(---layout--available-width, 100%) / 1 * 1); } /* Data: {"type":"layout","details":{"title":"default-layout","description":"","exampleContent":null,"id":"default-layout","isInternal":true,"isDefault":true,"isHidden":true,"instanceId":"GstumkRnbD"},"props":{"flexWrap":false,"columnCount":1,"weights":[1],"justifyContent":"center","alignItems":"center"}} */ /* --- */ /* Type: spacing Id: ySmCuZjCn- Title: 10px Instance Id: GstumkRnbD */ .-spacing--10px[class][class][class][data-instance-id="GstumkRnbD"] { padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; } .-spacing--10px[class][class][class][data-instance-id="GstumkRnbD"] > * { ---spacing--row-gap: 20px; ---spacing--column-gap: 10px; } /* Data: {"type":"spacing","props":{"paddingTop":{"value":10,"unit":"px"},"paddingBottom":{"value":10,"unit":"px"},"paddingLeft":{"value":10,"unit":"px"},"paddingRight":{"value":10,"unit":"px"},"rowGap":"20px","columnGap":{"value":10,"unit":"px"}},"details":{"title":"10px","description":"","exampleContent":null,"id":"ySmCuZjCn-","isDefault":false,"instanceId":"GstumkRnbD"}} */ /* --- */ /* Type: spacing Id: ySmCuZjCn- Title: 10px Instance Id: rqSzgCwq6G */ .-spacing--10px[class][class][class][data-instance-id="rqSzgCwq6G"] { padding-top: 30px; padding-right: 30px; padding-bottom: 30px; padding-left: 30px; } .-spacing--10px[class][class][class][data-instance-id="rqSzgCwq6G"] > * { ---spacing--row-gap: 30px; ---spacing--column-gap: 10px; } /* Data: {"type":"spacing","props":{"paddingTop":"30px","paddingBottom":"30px","paddingLeft":"30px","paddingRight":"30px","rowGap":"30px","columnGap":{"value":10,"unit":"px"},"horizontalGap":"30px"},"details":{"title":"10px","description":"","exampleContent":null,"id":"ySmCuZjCn-","isDefault":false,"instanceId":"rqSzgCwq6G"}} */ /* --- */ /* Type: layout Id: default-layout Title: default-layout Instance Id: dyfl2SvYak */ .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] { display: flex; flex-wrap: wrap; flex-direction: row; justify-content: space-between; align-items: center; } .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] > * { ---layout--available-width: calc(100% - var(---spacing--column-gap, 0px) * 3); ---typography--paragraph-spacing: initial !important; margin-top: var(---typography--paragraph-spacing, var(---self--row-gap, 0px)); margin-left: var(---self--column-gap, 0px); flex-basis: var(---self--column-width); flex-grow: 1; } .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] > :nth-child(-n+4) { ---self--row-gap: initial; } .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] > :not(:nth-child(-n+4)) { ---self--row-gap: var(---spacing--row-gap, 0px); } .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] > :nth-child(4n + 1)) { ---self--column-gap: initial; } .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] > :not(:nth-child(4n + 1)) { ---self--column-gap: var(---spacing--column-gap, 0px); } .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] > :nth-child(4n + 1) { ---self--column-width: calc(var(---layout--available-width, 100%) / 4 * 1); } .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] > :nth-child(4n + 2) { ---self--column-width: calc(var(---layout--available-width, 100%) / 4 * 1); } .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] > :nth-child(4n + 3) { ---self--column-width: calc(var(---layout--available-width, 100%) / 4 * 1); } .-layout--default-layout[class][class][class][data-instance-id="dyfl2SvYak"] > :nth-child(4n + 4) { ---self--column-width: calc(var(---layout--available-width, 100%) / 4 * 1); } /* Data: {"type":"layout","details":{"title":"default-layout","description":"","exampleContent":null,"id":"default-layout","isInternal":true,"isDefault":true,"isHidden":true,"instanceId":"dyfl2SvYak"},"props":{"flexWrap":true,"columnCount":4,"weights":[1,1,1,1],"justifyContent":"stretch","alignItems":"center"}} */</style>
    <section class="-dimensions--dimensions -layout--default-layout -section -spacing--10px" data-instance-id="rqSzgCwq6G">
    <macro-carousel navigation="navigation" slides-per-view="6" loop="loop" class='-component' data-embed-src="https://cdn.statically.io/gh/Inviz/macro-carousel/master12/dist/macro-carousel.js" data-attributes='{"slides-per-view":"6", "loop": "loop"}'>
        <div class='-button' slot="navigationSlot">&lt;</div>
          <div class="-card -layout--default-layout -spacing--10px" data-instance-id="GstumkRnbD" data-path-scope="brandslist.*" data-path-href="brandslist.*.Brand_link-href">
              <figure class="image" data-path-src="brandslist.*.Brand_image-src"><img /></figure>
              <p class="-text--tags-and-decorations---gray -typography--extra-small MsoNormal" style="text-align:center;" data-instance-id="w94vUIWqn9"><var class="var" data-path="brandslist.*.Brand_title"></var></p>
          </div>
        <div class='-button' slot="navigationSlot">&gt;</div>
    </macro-carousel>
    </section>`.replace(/brandslist/g, ID('brandslist'))
  })
  variant?.stage()
  variant?.publish()
  await component?.saveVariants()

  
  // datasource is only used to render carousel in the builder
  await library.datasources.save({
    id: ID('brandslist'),
    name: 'Brand list',
    description: 'Example brand list for carousel',
    sample: [{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/BAKER.png","Brand_title":"Baker","Brand_link-href":"https://www.skatewarehouse.com/Baker/catpage-BAKER.html"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/INDEPENDENT.png","Brand_title":"Independent","Brand_link-href":"https://www.skatewarehouse.com/Independent/catpage-INDEPENDENT.html"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/NIKE.png","Brand_title":"Nike SB","Brand_link-href":"https://www.skatewarehouse.com/Nike_SB/catpage-NIKE.html"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/SPITFIRE.png","Brand_title":"Spitfire","Brand_link-href":"https://www.skatewarehouse.com/Spitfire/catpage-SPITFIRE.html"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/SANTACRUZ.png","Brand_title":"Santa Cruz","Brand_link-href":"https://www.skatewarehouse.com/Santa_Cruz/catpage-SANTACRUZ.html"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/PRIMITIVE.png","Brand_title":"Primitive","Brand_link-href":"https://www.skatewarehouse.com/Primitive/catpage-PRIMITIVE.html"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/VANS.png","Brand_title":"Vans","Brand_link-href":"https://www.skatewarehouse.com/Vans/catpage-VANS.html"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/DICKIES67.png","Brand_title":"Dickies","Brand_link-href":"https://www.skatewarehouse.com"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/TOYMACHINE.png","Brand_title":"Toy Machine","Brand_link-href":"https://www.skatewarehouse.com"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/THRASHER.png","Brand_title":"Trasher","Brand_link-href":"https://www.skatewarehouse.com"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/GIRL.png","Brand_title":"Girls","Brand_link-href":"https://www.skatewarehouse.com"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/ADIDAS.png","Brand_title":"Adidas","Brand_link-href":"https://www.skatewarehouse.com"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/ANTIHERO.png","Brand_title":"Anti Hero","Brand_link-href":"https://www.skatewarehouse.com"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/ENJOI.png","Brand_title":"Enjoi","Brand_link-href":"https://www.skatewarehouse.com"},{"Brand_image-src":"https://img.skatewarehouse.com/fpcache/70/icons_logos/BONES.png","Brand_title":"Bones Wheels","Brand_link-href":"https://www.skatewarehouse.com"}]
  })

}

Script()


